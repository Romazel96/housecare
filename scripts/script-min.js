$(document).ready(function(){new WOW({animateClass:"animate__animated"}).init();const e=$("#menu");e.hide(),$("#nav").click(function(){e.fadeIn()}),$("#close").click(()=>{e.fadeOut()}),$(".menu__link").click(()=>e.hide()),$(".slider").slick({autoplay:!0,infinite:!0,slidesToShow:3,slidesToScroll:1,centerPadding:"0px",focusOnSelect:!0,initialSlide:1,autoplaySpeed:3e3,arrows:!0,speed:500,dots:!0,variableWidth:!0,centerMode:!0,responsive:[{breakpoint:768,settings:{centerMode:!1,arrows:!1,slidesToShow:1,variableWidth:!1}}]}),$(".project__images-main").magnificPopup({type:"image"}),$(".project__images-1").magnificPopup({type:"image"}),$(".project__images-2").magnificPopup({type:"image"}),$(".project__images-3").magnificPopup({type:"image"});const a=$("#projects__more");a.on("click",()=>{const e=$(".project__hidden");e.each(a=>e.eq(a).css({display:"flex"})),a.css({display:"none"})});const o=$("#pop-up");$("#map-btn").on("click",()=>{o[0].showModal(),$(document.body).css("opacity","0.4")}),o.on("click",({currentTarget:e,target:a})=>{a===e&&e.close(),a===e&&$(document.body).css("opacity","1")}),$("#closepop").on("click",()=>{o[0].close(),i.val(""),c.val(""),$(document.body).css("opacity","1")});const t=$("#phoneCtrl"),s=$("#nameCtrl"),n=$("#agreeCtrl"),i=$("#phoneCtrlPop"),c=$("#nameCtrlPop"),m=$("#pop-agree"),l={mask:"+7 (999) 999-9999"};t.inputmask(l),i.inputmask(l);const r=$(".form-control"),d=$(".form-agree-text"),_=$(".agree-text-pop");function p(e){return e.next().fadeIn(),e.addClass("animate__animated animate__shakeX"),e.css("border-color","red"),!0}function h(e,a){a?(e.removeClass("animate__animated animate__shakeX"),e.next().hide(),e.css("border-color","white")):(e.next().show(),e.css("border-color","red"))}function u(e,a,t,s,n){const i={name:e.val(),phone:a.val(),agree:t};$.ajax({method:"POST",url:"https://testologia.ru/checkout",data:i}).done(t=>(function(e,a,t,s,n){setTimeout(()=>{0===e.success?setTimeout(()=>alert("Возникла ошибка, перезвоните нам"),100):(a.val("").removeClass("animate__animated animate__shakeX"),t.val("").removeClass("animate__animated animate__shakeX"),$(s).hide(),$(n).show().addClass("animate__animated animate__bounceIn"),setTimeout(()=>{$(s).fadeIn().addClass("animate__animated animate__bounceIn"),$(n).hide(),o[0].close(),$(document.body).css("opacity","1")},3e3))},500)})(t,e,a,s,n))}s.on("keyup",e=>h(s,e.target.value)),t.on("keyup",e=>h(t,e.target.value)),i.on("keyup",e=>h(t,e.target.value)),c.on("keyup",e=>h(t,e.target.value)),$("#form-submit").on("click",e=>{e.preventDefault();let a=!1;$(".form-hint").hide(),d.removeClass("animate__animated animate__shakeX"),d.css("color","white"),r.removeClass("animate__animated animate__shakeX"),s.val()?s.css("border-color","white"):a=p(s),t.val()&&Inputmask.isValid(t.val(),l)?t.css("border-color","white"):a=p(t);const o=n.is(":checked");o||(d.addClass("animate__animated animate__shakeX"),d.css("color","red"),a=!0),a||u(s,t,o,".form-main",".success-main")}),$("#form-pop-submit").on("click",e=>{e.preventDefault();let a=!1;$(".form-hint").hide(),_.removeClass("animate__animated animate__shakeX"),_.css("color","white"),r.removeClass("animate__animated animate__shakeX"),c.val()?c.css("border-color","white"):a=p(c),i.val()&&Inputmask.isValid(i.val(),l)?i.css("border-color","white"):a=p(i);const o=m.is(":checked");o||(_.addClass("animate__animated animate__shakeX"),_.css("color","red"),a=!0),a||u(c,i,o,".form-pop",".success-pop")});const k=$(".technologies__block-arrows"),f=$(".technologies__block-description"),v=window.matchMedia("(max-width: 1023px)");function g(e){e.matches?(f.each(e=>f.eq(e).css("display","none")),k.each(e=>k.eq(e).on("click",()=>(function(e){f.removeClass("animate__animated"),f.each(()=>{k.eq(e).css("transform","scale(1.1)"),f.eq(e).show()})})(e))),k.each(e=>k.eq(e).on("mouseleave",()=>(function(e){k.eq(e).css("transform","scale(1)"),f.each(()=>f.eq(e).hide())})(e)))):(k.each(e=>k.eq(e).off()),k.each(e=>k.eq(e).off()),f.each(e=>f.eq(e).css("display","block")))}v.addEventListener("change",g),g(v)});